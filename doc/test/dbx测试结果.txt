在给定的机器性能和网络环境下，执行游戏当前的下线存储过程

#### 测试服务器
- ip: 172.16.2.230
- cpu Pentium(R) Dual-Core CPU E5200  @ 2.50GHz双核
- 内存  6g
- 系统 CentOS release 6.4 (Final)
- 运行进程：1Session 1Gateway 3World 1dbx
- mysql服务器：172.16.2.218

#### 测试客户端
4个进程，分别运行测试脚本。

#### 测试数据
模拟玩家下线存储过程调用，1次下线大概为14个存储过程调用。

#### 测试结果

------------------------------------------------------------------------
date:2017-4-21

1. dbx连接数5，4个客户端，每秒10次(5×14×4 = 140个存储过程/s)
cpu消耗 0.7-2.5 内存最大消耗0.3

2. dbx连接数100，4个客户端，每秒5次（5×14×4 = 280个/s）
最小消耗： 16333 mhsg      20   0 2050m  16m 2572 S  0.3  0.3   0:01.35 dbx
最大消耗： 16333 mhsg      20   0 2050m  16m 2572 S  2.0  0.3   0:01.45 dbx
cpu消耗：0.3-2.0，内存消耗0.3
并发情况下耗时较长的mysql语句：execute queryMysql(cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(1010).
dbx耗时不超过100ms

3. dbx连接数100，4个客户端，每秒10次
cpu消耗 0.3-2.7 内存最大消耗0.3

4. dbx连接数100，4个客户端，每秒20次
cpu消耗 1.3-2.7 内存最大消耗0.3
用时较长的存储过程：(cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(1870).

5. dbx连接数100，每秒20次（280*4个存储过程请求）
cpu消耗 2.7-5.6 内存最大消耗0.3
cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(7790)

5. dbx连接数500，4个客户端，每秒20次，
cpu消耗 2.7-5.6 内存最大消耗1.0
cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(7790)

------------------------------------------------------------------------
date:2017-4-24

1. dbx连接数500，4个客户端进程

1.1 每秒20次。（同时产生20*14*4 = 1120个存储过程调用）
top | grep dbx
最小消耗： 3952 mhsg      20   0 2547m  20m 2572 S  0.7  0.3   0:02.37 dbx
最大消耗： 3952 mhsg      20   0 2547m  20m 2572 S  5.0  0.3   0:02.69 dbx
cpu消耗：0.7-5.0，内存消耗0.3
并发情况下耗时较长的mysql语句：(cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(2900).

1.2 每秒25次。（同时产生25*14*4 = 1400个存储过程调用）
top | grep dbx
最小消耗： 5357 mhsg      20   0 6104m  54m 2572 S  0.7  0.9   0:00.89 dbx
最大消耗： 5357 mhsg      20   0 6104m  54m 2572 S  6.0  0.9   0:01.07 dbx
cpu消耗：0.7-6.0，内存消耗0.9
并发情况下耗时较长的mysql语句：execute queryMysql(cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(5020).

1.3 每秒30次。（同时产生30*14*4 = 1680个存储过程调用）
top | grep dbx
最小消耗： 5942 mhsg      20   0 6104m  53m 2572 S  0.7  0.9   0:01.37 dbx
最大消耗： 5942 mhsg      20   0 6104m  53m 2576 S  7.0  0.9   0:02.61 dbx
cpu消耗：0.7-7.0，内存消耗0.9
并发情况下耗时较长的mysql语句：execute queryMysql(cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(6050).

2. dbx连接数600，4个客户端进程

2.1 每秒30次。（同时产生30*14*4 = 1680个存储过程调用）
top | grep dbx
最小消耗： 14431 mhsg      20   0 7118m  76m 2572 S  1.3  1.3   0:02.94 dbx
最大消耗： 14431 mhsg      20   0 7118m  75m 2572 S  7.9  1.3   0:02.44 dbx
cpu消耗：1.3-6.0，内存消耗1.3
并发情况下耗时较长的mysql语句：execute queryMysql(cmd:call sp_UpdatePlayerAttrBatch(5128, '11,0,12,18,14,12,43,1028,44,361,118,201,119,3480,147,3', 8);) time:(9460).

查看时间消耗，基本上dbx的有效处理时间很短，不超过100ms，dbx的压力并不大。在230的测试环境中，在主机资源允许的情况下，在500个连接以内，连接越多，效率越高。而查询请求太多会导致mysql的查询返回越来越慢，如sp_UpdatePlayerAttrBatch的用时增长，查询时间太长的原因是，等待mysql的返回。
